'use client'

// Sistema simple de idiomas para toda la app
// Idiomas soportados: español (es), inglés (en), hebreo (he)

export type Locale = 'es' | 'en' | 'he'

export const RTL_LOCALES: Locale[] = ['he']

export const DEFAULT_LOCALE: Locale = 'es'

const STORAGE_KEY = 'gentum_locale'

export function getInitialLocale(): Locale {
  if (typeof window === 'undefined') {
    return DEFAULT_LOCALE
  }
  const stored = window.localStorage.getItem(STORAGE_KEY) as Locale | null
  if (stored && ['es', 'en', 'he'].includes(stored)) return stored
  return DEFAULT_LOCALE
}

export function saveLocale(locale: Locale) {
  if (typeof window === 'undefined') return
  window.localStorage.setItem(STORAGE_KEY, locale)
}

// Traducciones mínimas para probar el sistema en el Home y Header
const MESSAGES: Record<Locale, Record<string, string>> = {
  es: {
    // Header
    nav_experiences: 'Experiencias',
    nav_community: 'Comunidad',
    nav_groups: 'Grupos',
    nav_favorites: 'Favoritos',
    nav_challenges: 'Desafíos',
    nav_leaderboard: 'Ranking',
    nav_plans: 'Planes',
    nav_login: 'Ingresar',
    nav_search: 'Búsqueda',
    nav_messages: 'Mensajes',
    nav_notifications: 'Notificaciones',
    nav_language: 'Idioma:',
    lang_es: 'Español',
    lang_en: 'Inglés',
    lang_he: 'Hebreo',

    // Home
    home_experiences_title: 'Agenda curada en Buenos Aires',
    home_experiences_cta: 'Ver todas las experiencias →',
    home_how_it_works_title: 'Cómo funciona',
    home_how_it_works_step1_title: '1. Descubrí',
    home_how_it_works_step1_text: 'Explorá experiencias curadas en Buenos Aires, filtradas por tus intereses y fechas.',
    home_how_it_works_step2_title: '2. Conectá',
    home_how_it_works_step2_text: 'Unite a grupos existentes o creá el tuyo con cupos personalizados y coordinación simple.',
    home_how_it_works_step3_title: '3. Viví',
    home_how_it_works_step3_text: 'Disfrutá experiencias auténticas con anfitriones verificados y creá recuerdos únicos.',
    home_hero_logged_title: '¡Bienvenido de vuelta, {name}!',
    home_hero_logged_sub: 'Seguí explorando y ganá puntos',
    home_hero_points: 'Puntos',
    home_hero_level: 'Tu nivel',
    home_hero_streak: 'Días de racha',
    home_hero_go_dashboard: 'Ir al Dashboard',
    home_hero_explore_experiences: 'Explorar Experiencias',
    home_hero_guest_title: 'Descubrí Buenos Aires con la comunidad israelí que ya la vive',
    home_hero_guest_sub: 'Explorá actividades curadas, armá tu propio grupo y disfrutá experiencias auténticas con anfitriones bilingües.',
    home_hero_guest_cta_register: 'Crear cuenta gratis',
    home_hero_guest_cta_experiences: 'Ver experiencias',
    home_hero_guest_badge: '✓ +120 viajeros activos esta semana',
    premium_experiences_badge: 'EXPERIENCIAS PREMIUM',
    premium_experiences_title: 'Experiencias Gastronómicas Exclusivas',
    premium_experiences_subtitle: 'Las mejores experiencias culinarias curadas especialmente para vos, en tu idioma, con tu gente, y en los lugares más exclusivos de Buenos Aires.',
    premium_experiences_cta: 'Ver todas las experiencias premium →',
    home_experiences_havaia_title: 'Experiencias Havaia Exclusivas en Buenos Aires',
    home_experiences_havaia_subtitle: 'Todas las experiencias están pensadas, curadas y únicas, porque se diseñaron solo para vos y con quien quieras compartirla. Las experiencias havaia, solo las encontrás en havaia.',
    see_more: 'Ver más',
    table_seats: 'lugares',
    table_occupied: 'ocupados',
    table_available: 'disponibles',
    home_hero_level_value: 'Nivel {level}',
    home_community_title: 'Nunca viajás solo',
    home_community_text: 'Ingresá a foros y chats temáticos, recibí tips al instante y coordiná planes con viajeros que comparten tus intereses.',
    home_community_cta: 'Explorar foros',
    home_premium_title: 'Desbloqueá Experiencias Exclusivas',
    home_premium_subtitle: 'Accedé a experiencias premium, creá grupos ilimitados, obtené prioridad en reservas y disfrutá de beneficios exclusivos',
    home_premium_feature1: 'Grupos Ilimitados',
    home_premium_feature2: 'Experiencias Premium',
    home_premium_feature3: 'Prioridad Total',
    home_premium_cta1: 'Ver Planes Premium',
    home_premium_cta2: 'Explorar Experiencias',
    home_premium_badge: '✓ 7 días de prueba gratis • Sin tarjeta de crédito',
    home_groups_title: 'Grupos a tu medida',
    home_groups_text: 'Elegí cupos, definí roles, dividí pagos y mantené todo coordinado desde un solo chat. Creá grupos privados o unite a públicos.',
    home_groups_cta: 'Crear grupo',
    home_sections_title: 'Explorá todas las secciones',
    home_section_experiences_title: 'Experiencias',
    home_section_experiences_text: 'Descubrí actividades curadas en Buenos Aires',
    home_section_explore: 'Explorar →',
    home_section_groups_title: 'Grupos',
    home_section_groups_text: 'Creá o uníte a grupos de viajeros',
    home_section_groups_cta: 'Ver grupos →',
    home_section_community_title: 'Comunidad',
    home_section_community_text: 'Conectá con otros viajeros',
    home_section_community_cta: 'Ver comunidad →',
    home_section_favorites_title: 'Favoritos',
    home_section_favorites_text: 'Tus experiencias guardadas',
    home_section_favorites_cta: 'Ver favoritos →',
    home_section_challenges_title: 'Desafíos',
    home_section_challenges_text: 'Completá desafíos semanales',
    home_section_challenges_cta: 'Ver desafíos →',
    home_section_leaderboard_title: 'Ranking',
    home_section_leaderboard_text: 'Competí con otros usuarios',
    home_section_leaderboard_cta: 'Ver ranking →',
    home_section_dashboard_title: 'Dashboard',
    home_section_dashboard_text: 'Tu progreso y estadísticas',
    home_section_dashboard_cta: 'Ir al dashboard →',
    home_testimonials_title: 'Lo que dicen nuestros viajeros',
    home_security_title: 'Seguridad y soporte',
    home_security_text: 'Anfitriones verificados, moderación bilingüe y asistencia 24/7 para cualquier imprevisto durante tu viaje.',
    home_security_cta: 'Contactar soporte',
    footer_tagline: 'Plataforma de experiencias únicas',
    footer_terms: 'Términos y condiciones',
    footer_privacy: 'Política de privacidad',
    footer_service: 'Condiciones del servicio',
    footer_copyright: 'Todos los derechos reservados',
    home_example_group_title: 'Grupo: Tour Gastronómico',
    home_example_group_date: '15 de Marzo, 19:00',
    home_example_group_confirmed: '{confirmed}/{total} personas confirmadas',
    home_example_community_question: '¿Alguien conoce restaurantes kosher en Palermo?',
    home_example_community_reply: 'Recomiendo La Crespo en Villa Crespo, excelente!',
    home_example_community_invite: '¿Armamos un grupo para el tour de tango mañana?',
    home_section_premium_title: 'Planes Premium',
    home_section_premium_text: 'Desbloqueá todas las funcionalidades',
    home_section_premium_cta: 'Ver planes →',
    footer_support: 'Soporte',
    footer_faq: 'Preguntas frecuentes',
    footer_contact: 'Contacto 24/7',
    footer_security: 'Seguridad',
    footer_legal: 'Legal',
    footer_language: 'Idioma',
  },
  en: {
    // Header
    nav_experiences: 'Experiences',
    nav_community: 'Community',
    nav_groups: 'Groups',
    nav_favorites: 'Favorites',
    nav_challenges: 'Challenges',
    nav_leaderboard: 'Ranking',
    nav_plans: 'Plans',
    nav_login: 'Sign in',
    nav_search: 'Search',
    nav_messages: 'Messages',
    nav_notifications: 'Notifications',
    nav_language: 'Language:',
    lang_es: 'Spanish',
    lang_en: 'English',
    lang_he: 'Hebrew',

    // Home
    home_experiences_title: 'Curated agenda in Buenos Aires',
    home_experiences_cta: 'See all experiences →',
    home_how_it_works_title: 'How it works',
    home_how_it_works_step1_title: '1. Discover',
    home_how_it_works_step1_text: 'Explore curated experiences in Buenos Aires, filtered by your interests and dates.',
    home_how_it_works_step2_title: '2. Connect',
    home_how_it_works_step2_text: 'Join existing groups or create your own with custom spots and simple coordination.',
    home_how_it_works_step3_title: '3. Live',
    home_how_it_works_step3_text: 'Enjoy authentic experiences with verified hosts and create unique memories.',
    home_hero_logged_title: 'Welcome back, {name}!',
    home_hero_logged_sub: 'Keep exploring and earn points',
    home_hero_points: 'Points',
    home_hero_level: 'Your level',
    home_hero_streak: 'Day streak',
    home_hero_go_dashboard: 'Go to Dashboard',
    home_hero_explore_experiences: 'Explore Experiences',
    home_hero_guest_title: 'Discover Buenos Aires with the Israeli community that already lives it',
    home_hero_guest_sub: 'Explore curated activities, create your own group and enjoy authentic experiences with bilingual hosts.',
    home_hero_guest_cta_register: 'Create free account',
    home_hero_guest_cta_experiences: 'See experiences',
    home_hero_guest_badge: '✓ 120+ active travelers this week',
    premium_experiences_badge: 'PREMIUM EXPERIENCES',
    premium_experiences_title: 'Exclusive Gastronomic Experiences',
    premium_experiences_subtitle: 'The best culinary experiences curated especially for you, in your language, with your people, and in the most exclusive places in Buenos Aires.',
    premium_experiences_cta: 'See all premium experiences →',
    home_experiences_havaia_title: 'Exclusive Havaia Experiences in Buenos Aires',
    home_experiences_havaia_subtitle: 'All experiences are thought, curated and unique, because they were designed just for you and with whoever you want to share them with. Havaia experiences, you only find them at havaia.',
    see_more: 'See more',
    table_seats: 'seats',
    table_occupied: 'occupied',
    table_available: 'available',
    home_hero_level_value: 'Level {level}',
    home_community_title: 'You never travel alone',
    home_community_text: 'Join themed forums and chats, get instant tips and coordinate plans with travelers who share your interests.',
    home_community_cta: 'Explore forums',
    home_premium_title: 'Unlock Exclusive Experiences',
    home_premium_subtitle: 'Access premium experiences, create unlimited groups, get priority on reservations and enjoy exclusive benefits',
    home_premium_feature1: 'Unlimited Groups',
    home_premium_feature2: 'Premium Experiences',
    home_premium_feature3: 'Total Priority',
    home_premium_cta1: 'See Premium Plans',
    home_premium_cta2: 'Explore Experiences',
    home_premium_badge: '✓ 7 days free trial • No credit card',
    home_groups_title: 'Groups tailored to you',
    home_groups_text: 'Choose spots, define roles, split payments and keep everything coordinated from a single chat. Create private groups or join public ones.',
    home_groups_cta: 'Create group',
    home_sections_title: 'Explore all sections',
    home_section_experiences_title: 'Experiences',
    home_section_experiences_text: 'Discover curated activities in Buenos Aires',
    home_section_explore: 'Explore →',
    home_section_groups_title: 'Groups',
    home_section_groups_text: 'Create or join traveler groups',
    home_section_groups_cta: 'See groups →',
    home_section_community_title: 'Community',
    home_section_community_text: 'Connect with other travelers',
    home_section_community_cta: 'See community →',
    home_section_favorites_title: 'Favorites',
    home_section_favorites_text: 'Your saved experiences',
    home_section_favorites_cta: 'See favorites →',
    home_section_challenges_title: 'Challenges',
    home_section_challenges_text: 'Complete weekly challenges',
    home_section_challenges_cta: 'See challenges →',
    home_section_leaderboard_title: 'Ranking',
    home_section_leaderboard_text: 'Compete with other users',
    home_section_leaderboard_cta: 'See ranking →',
    home_section_dashboard_title: 'Dashboard',
    home_section_dashboard_text: 'Your progress and statistics',
    home_section_dashboard_cta: 'Go to dashboard →',
    home_testimonials_title: 'What our travelers say',
    home_security_title: 'Security and support',
    home_security_text: 'Verified hosts, bilingual moderation and 24/7 assistance for any unforeseen event during your trip.',
    home_security_cta: 'Contact support',
    footer_tagline: 'Unique experiences platform',
    footer_terms: 'Terms and conditions',
    footer_privacy: 'Privacy policy',
    footer_service: 'Service conditions',
    footer_copyright: 'All rights reserved',
    home_example_group_title: 'Group: Gastronomic Tour',
    home_example_group_date: 'March 15, 7:00 PM',
    home_example_group_confirmed: '{confirmed}/{total} people confirmed',
    home_example_community_question: 'Does anyone know kosher restaurants in Palermo?',
    home_example_community_reply: 'I recommend La Crespo in Villa Crespo, excellent!',
    home_example_community_invite: 'Shall we form a group for the tango tour tomorrow?',
    home_section_premium_title: 'Premium Plans',
    home_section_premium_text: 'Unlock all features',
    home_section_premium_cta: 'See plans →',
    footer_support: 'Support',
    footer_faq: 'Frequently asked questions',
    footer_contact: '24/7 Contact',
    footer_security: 'Security',
    footer_legal: 'Legal',
    footer_language: 'Language',
  },
  he: {
    // Header (hebreo, derecha a izquierda)
    nav_experiences: 'חוויות',
    nav_community: 'קהילה',
    nav_groups: 'קבוצות',
    nav_favorites: 'מועדפים',
    nav_challenges: 'אתגרים',
    nav_leaderboard: 'דירוג',
    nav_plans: 'תוכניות',
    nav_login: 'התחברות',
    nav_search: 'חיפוש',
    nav_messages: 'הודעות',
    nav_notifications: 'התראות',
    nav_language: 'שפה:',
    lang_es: 'ספרדית',
    lang_en: 'אנגלית',
    lang_he: 'עברית',

    // Home
    home_experiences_title: 'אוסף חוויות נבחרות בבואנוס איירס',
    home_experiences_cta: 'צפה בכל החוויות →',
    home_how_it_works_title: 'איך זה עובד',
    home_how_it_works_step1_title: '1. גילוי',
    home_how_it_works_step1_text: 'גלה חוויות נבחרות בבואנוס איירס, מסוננות לפי תחומי העניין והתאריכים שלך.',
    home_how_it_works_step2_title: '2. התחברות',
    home_how_it_works_step2_text: 'הצטרף לקבוצות קיימות או צור קבוצה משלך עם מספר משתתפים מותאם.',
    home_how_it_works_step3_title: '3. חוויה',
    home_how_it_works_step3_text: 'תהנה מחוויות אותנטיות עם מארחים מאומתים וצור זיכרונות מיוחדים.',
    home_hero_logged_title: 'ברוך שובך, {name}!',
    home_hero_logged_sub: 'המשך לגלות ולצבור נקודות',
    home_hero_points: 'נקודות',
    home_hero_level: 'הרמה שלך',
    home_hero_streak: 'ימים ברצף',
    home_hero_go_dashboard: 'ללוח הבקרה',
    home_hero_explore_experiences: 'לגלות חוויות',
    home_hero_guest_title: 'גלה את בואנוס איירס עם הקהילה הישראלית שכבר חיה אותה',
    home_hero_guest_sub: 'גלה פעילויות נבחרות, צור קבוצה משלך ותהנה מחוויות אותנטיות עם מארחים דוברי עברית.',
    home_hero_guest_cta_register: 'יצירת חשבון בחינם',
    home_hero_guest_cta_experiences: 'צפה בחוויות',
    home_hero_guest_badge: '✓ מעל 120 מטיילים פעילים השבוע',
    premium_experiences_badge: 'חוויות פרימיום',
    premium_experiences_title: 'חוויות גסטרונומיות בלעדיות',
    premium_experiences_subtitle: 'החוויות הקולינריות הטובות ביותר שנבחרו במיוחד עבורך, בשפה שלך, עם האנשים שלך, ובמקומות היוקרתיים ביותר בבואנוס איירס.',
    premium_experiences_cta: 'צפה בכל החוויות הפרימיום →',
    home_experiences_havaia_title: 'חוויות Havaia בלעדיות בבואנוס איירס',
    home_experiences_havaia_subtitle: 'כל החוויות נחשבות, נבחרות וייחודיות, כי הן תוכננו רק עבורך ועם מי שתרצה לחלוק אותן. חוויות havaia, אתה מוצא אותן רק ב-havaia.',
    see_more: 'ראה עוד',
    table_seats: 'מקומות',
    table_occupied: 'תפוסים',
    table_available: 'זמינים',
    home_hero_level_value: 'רמה {level}',
    home_community_title: 'אתה אף פעם לא נוסע לבד',
    home_community_text: 'הצטרף לפורומים וצ\'אטים בנושאים, קבל טיפים מיידיים ותאם תוכניות עם מטיילים שחולקים את תחומי העניין שלך.',
    home_community_cta: 'לחקור פורומים',
    home_premium_title: 'פתח חוויות בלעדיות',
    home_premium_subtitle: 'גש לחוויות פרימיום, צור קבוצות ללא הגבלה, קבל עדיפות בהזמנות ותהנה מיתרונות בלעדיים',
    home_premium_feature1: 'קבוצות ללא הגבלה',
    home_premium_feature2: 'חוויות פרימיום',
    home_premium_feature3: 'עדיפות מלאה',
    home_premium_cta1: 'לצפות בתוכניות פרימיום',
    home_premium_cta2: 'לחקור חוויות',
    home_premium_badge: '✓ 7 ימי ניסיון חינם • ללא כרטיס אשראי',
    home_groups_title: 'קבוצות מותאמות לך',
    home_groups_text: 'בחר מקומות, הגדר תפקידים, חלק תשלומים ושמור על הכל מתואם מצ\'אט אחד. צור קבוצות פרטיות או הצטרף לציבוריות.',
    home_groups_cta: 'יצירת קבוצה',
    home_sections_title: 'חקור את כל הסעיפים',
    home_section_experiences_title: 'חוויות',
    home_section_experiences_text: 'גלה פעילויות נבחרות בבואנוס איירס',
    home_section_explore: 'לחקור →',
    home_section_groups_title: 'קבוצות',
    home_section_groups_text: 'צור או הצטרף לקבוצות מטיילים',
    home_section_groups_cta: 'לצפות בקבוצות →',
    home_section_community_title: 'קהילה',
    home_section_community_text: 'התחבר עם מטיילים אחרים',
    home_section_community_cta: 'לצפות בקהילה →',
    home_section_favorites_title: 'מועדפים',
    home_section_favorites_text: 'החוויות השמורות שלך',
    home_section_favorites_cta: 'לצפות במועדפים →',
    home_section_challenges_title: 'אתגרים',
    home_section_challenges_text: 'השלם אתגרים שבועיים',
    home_section_challenges_cta: 'לצפות באתגרים →',
    home_section_leaderboard_title: 'דירוג',
    home_section_leaderboard_text: 'התחרה עם משתמשים אחרים',
    home_section_leaderboard_cta: 'לצפות בדירוג →',
    home_section_dashboard_title: 'לוח בקרה',
    home_section_dashboard_text: 'ההתקדמות והסטטיסטיקות שלך',
    home_section_dashboard_cta: 'ללוח הבקרה →',
    home_testimonials_title: 'מה אומרים המטיילים שלנו',
    home_security_title: 'אבטחה ותמיכה',
    home_security_text: 'מארחים מאומתים, פיקוח דו-לשוני וסיוע 24/7 לכל אירוע בלתי צפוי במהלך הטיול שלך.',
    home_security_cta: 'יצירת קשר עם תמיכה',
    footer_tagline: 'פלטפורמה לחוויות ייחודיות',
    footer_terms: 'תנאים והגבלות',
    footer_privacy: 'מדיניות פרטיות',
    footer_service: 'תנאי השירות',
    footer_copyright: 'כל הזכויות שמורות',
    home_example_group_title: 'קבוצה: סיור גסטרונומי',
    home_example_group_date: '15 במרץ, 19:00',
    home_example_group_confirmed: '{confirmed}/{total} אנשים מאושרים',
    home_example_community_question: 'מישהו מכיר מסעדות כשרות בפלרמו?',
    home_example_community_reply: 'אני ממליץ על La Crespo בווילה קרספו, מעולה!',
    home_example_community_invite: 'בואו נארגן קבוצה לסיור טנגו מחר?',
    home_section_premium_title: 'תוכניות פרימיום',
    home_section_premium_text: 'פתח את כל התכונות',
    home_section_premium_cta: 'לצפות בתוכניות →',
    footer_support: 'תמיכה',
    footer_faq: 'שאלות נפוצות',
    footer_contact: 'יצירת קשר 24/7',
    footer_security: 'אבטחה',
    footer_legal: 'משפטי',
    footer_language: 'שפה',
  },
}

export function t(locale: Locale, key: string, vars?: Record<string, string | number>): string {
  const dict = MESSAGES[locale] || MESSAGES[DEFAULT_LOCALE]
  let msg = dict[key] || key
  if (vars) {
    Object.entries(vars).forEach(([k, v]) => {
      msg = msg.replace(`{${k}}`, String(v))
    })
  }
  return msg
}



